<!DOCTYPE html>
<html lang="es-PE">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pagos en Línea - Municipalidad de Ivochote</title>
    <!-- Font Libraries -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Icon Library -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Animation Library -->
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
    
    <!-- Swiper CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="../assets/css/output.css">
    <link rel="stylesheet" href="../assets/css/styles.css">
</head>
<body class="font-sans antialiased text-gray-800 bg-gray-50">
    <!-- Header Component -->
    <div id="header-container"></div>

    <!-- Main Content -->
    <main class="py-12">
        <div class="container px-6 mx-auto">
            <!-- Hero Section -->
            <section class="bg-green-600 rounded-xl overflow-hidden mb-12">
                <div class="relative py-16 px-6 sm:py-24 sm:px-12 lg:px-16">
                    <div class="max-w-2xl mx-auto text-center">
                        <h1 class="text-3xl md:text-4xl font-bold text-white mb-4">Pagos en Línea</h1>
                        <p class="text-lg text-green-100 mb-8">Realiza tus pagos de manera rápida, segura y sin salir de casa</p>
                    </div>
                </div>
            </section>

            <!-- Pasos para Pagar -->
            <section class="mb-16">
                <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-8 text-center">¿Cómo pagar?</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="text-center">
                        <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="text-blue-600 font-bold text-xl">1</span>
                        </div>
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">Selecciona el servicio</h3>
                        <p class="text-gray-600">Elige el servicio o arbitrio que deseas pagar de nuestra lista de opciones disponibles.</p>
                    </div>
                    <div class="text-center">
                        <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="text-green-600 font-bold text-xl">2</span>
                        </div>
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">Ingresa tus datos</h3>
                        <p class="text-gray-600">Completa el formulario con la información requerida para generar tu recibo.</p>
                    </div>
                    <div class="text-center">
                        <div class="w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="text-purple-600 font-bold text-xl">3</span>
                        </div>
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">Realiza el pago</h3>
                        <p class="text-gray-600">Paga de forma segura con tarjeta de crédito/débito o transferencia bancaria.</p>
                    </div>
                </div>
            </section>

            <!-- Servicios Disponibles -->
            <section class="mb-16">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8">
                    <h2 class="text-2xl md:text-3xl font-bold text-gray-800">Servicios Disponibles</h2>
                    <div class="mt-4 md:mt-0">
                        <input type="text" placeholder="Buscar servicio..." class="border border-gray-300 rounded-lg px-4 py-2 focus:ring-blue-500 focus:border-blue-500">
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-shadow">
                        <div class="p-6">
                            <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-4">
                                <i class="fas fa-home text-blue-600 text-xl"></i>
                            </div>
                            <h3 class="text-xl font-semibold text-gray-800 mb-2">Arbitrios Municipales</h3>
                            <p class="text-gray-600 mb-4">Pago de arbitrios de limpieza pública, parques y jardines, y serenazgo.</p>
                            <a href="#" class="text-blue-600 font-medium inline-flex items-center">
                                Pagar ahora <i class="fas fa-arrow-right ml-2"></i>
                            </a>
                        </div>
                    </div>
                    <!-- Más servicios -->
                </div>
            </section>

            <!-- Medios de Pago -->
            <section class="bg-gray-50 rounded-xl p-8 mb-16">
                <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-8 text-center">Medios de Pago Aceptados</h2>
                <div class="flex flex-wrap justify-center gap-8">
                    <div class="text-center">
                        <div class="w-16 h-16 bg-white rounded-full shadow flex items-center justify-center mx-auto mb-2">
                            <i class="fab fa-cc-visa text-blue-900 text-2xl"></i>
                        </div>
                        <span class="text-sm text-gray-600">Visa</span>
                    </div>
                    <!-- Más medios de pago -->
                </div>
            </section>

            <!-- Preguntas Frecuentes -->
            <section class="bg-white rounded-xl shadow-md p-8">
                <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-8">Preguntas Frecuentes</h2>
                <div class="space-y-4">
                    <div class="border-b border-gray-200 pb-4">
                        <button class="faq-toggle w-full flex justify-between items-center text-left">
                            <h3 class="font-medium text-gray-900">¿Es seguro pagar en este sitio?</h3>
                            <i class="fas fa-chevron-down text-gray-400 transition-transform"></i>
                        </button>
                        <div class="faq-content mt-2 hidden">
                            <p class="text-gray-600">Sí, nuestro sistema de pagos utiliza tecnología de encriptación SSL para proteger tus datos. Además, no almacenamos información de tus tarjetas de crédito/débito.</p>
                        </div>
                    </div>
                    <!-- Más preguntas -->
                </div>
            </section>
        </div>
    </main>

    <!-- Footer Component -->
    <div id="footer-container"></div>

    <!-- Scripts -->
    <script src="/assets/js/main.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
    // Manejar el formulario de pago
    const pagosForm = document.getElementById('pago-form');
    if (pagosForm) {
        pagosForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Validar formulario
            const servicio = document.getElementById('servicio');
            const monto = document.getElementById('monto');
            const metodo = document.getElementById('metodo-pago');
            const tarjeta = document.getElementById('tarjeta');
            const vencimiento = document.getElementById('vencimiento');
            const cvv = document.getElementById('cvv');
            let isValid = true;
            
            if (servicio.value === '') {
                mostrarError(servicio, 'Por favor selecciona un servicio');
                isValid = false;
            } else {
                removerError(servicio);
            }
            
            if (monto.value === '' || parseFloat(monto.value) <= 0) {
                mostrarError(monto, 'Por favor ingresa un monto válido');
                isValid = false;
            } else {
                removerError(monto);
            }
            
            if (metodo.value === '') {
                mostrarError(metodo, 'Por favor selecciona un método de pago');
                isValid = false;
            } else {
                removerError(metodo);
                
                // Validar campos de tarjeta si es el método seleccionado
                if (metodo.value === 'tarjeta') {
                    if (tarjeta.value === '' || tarjeta.value.replace(/\s/g, '').length !== 16) {
                        mostrarError(tarjeta, 'Por favor ingresa un número de tarjeta válido');
                        isValid = false;
                    } else {
                        removerError(tarjeta);
                    }
                    
                    if (vencimiento.value === '' || !vencimiento.value.match(/^(0[1-9]|1[0-2])\/?([0-9]{2})$/)) {
                        mostrarError(vencimiento, 'Por favor ingresa una fecha válida (MM/AA)');
                        isValid = false;
                    } else {
                        removerError(vencimiento);
                    }
                    
                    if (cvv.value === '' || cvv.value.length < 3) {
                        mostrarError(cvv, 'Por favor ingresa un CVV válido');
                        isValid = false;
                    } else {
                        removerError(cvv);
                    }
                }
            }
            
            if (isValid) {
                // Mostrar recibo de pago (simulado)
                mostrarRecibo({
                    servicio: servicio.options[servicio.selectedIndex].text,
                    monto: parseFloat(monto.value).toFixed(2),
                    referencia: 'PAG-' + Math.floor(Math.random() * 1000000),
                    fecha: new Date().toLocaleDateString('es-PE'),
                    hora: new Date().toLocaleTimeString('es-PE', { hour: '2-digit', minute: '2-digit' })
                });
            }
        });
    }
    
    // Manejar cambio de método de pago
    const metodoPago = document.getElementById('metodo-pago');
    if (metodoPago) {
        metodoPago.addEventListener('change', function() {
            const tarjetaFields = document.getElementById('tarjeta-fields');
            
            if (this.value === 'tarjeta') {
                tarjetaFields.classList.remove('hidden');
            } else {
                tarjetaFields.classList.add('hidden');
            }
        });
    }
    
    // Manejar cambio de servicio para actualizar monto
    const servicioSelect = document.getElementById('servicio');
    if (servicioSelect) {
        servicioSelect.addEventListener('change', function() {
            const montoInput = document.getElementById('monto');
            // En una app real, esto vendría de una API basada en el servicio seleccionado
            const montos = {
                'arbitrios': '150.00',
                'licencia': '250.00',
                'multa': '350.00'
            };
            
            montoInput.value = montos[this.value] || '';
        });
    }
    
    // Formatear número de tarjeta
    const tarjetaInput = document.getElementById('tarjeta');
    if (tarjetaInput) {
        tarjetaInput.addEventListener('input', function() {
            let value = this.value.replace(/\s+/g, '').replace(/[^0-9]/gi, '');
            let formatted = '';
            
            for (let i = 0; i < value.length && i < 16; i++) {
                if (i > 0 && i % 4 === 0) {
                    formatted += ' ';
                }
                formatted += value[i];
            }
            
            this.value = formatted;
        });
    }
    
    // Formatear fecha de vencimiento
    const vencimientoInput = document.getElementById('vencimiento');
    if (vencimientoInput) {
        vencimientoInput.addEventListener('input', function() {
            let value = this.value.replace(/\D/g, '');
            
            if (value.length > 2) {
                value = value.substring(0, 2) + '/' + value.substring(2, 4);
            }
            
            this.value = value;
        });
    }
    
    // Manejar acordeón de preguntas frecuentes
    document.querySelectorAll('.faq-toggle').forEach(toggle => {
        toggle.addEventListener('click', function() {
            const content = this.nextElementSibling;
            const icon = this.querySelector('i');
            
            content.classList.toggle('hidden');
            icon.classList.toggle('rotate-180');
        });
    });
});

function mostrarError(input, mensaje) {
    const formGroup = input.closest('.form-group') || input.parentElement;
    let errorElement = formGroup.querySelector('.error-text');
    
    if (!errorElement) {
        errorElement = document.createElement('div');
        errorElement.className = 'error-text text-red-600 text-sm mt-1';
        formGroup.appendChild(errorElement);
    }
    
    errorElement.textContent = mensaje;
    input.classList.add('border-red-600');
}

function removerError(input) {
    const formGroup = input.closest('.form-group') || input.parentElement;
    const errorElement = formGroup.querySelector('.error-text');
    
    if (errorElement) {
        errorElement.remove();
    }
    
    input.classList.remove('border-red-600');
}

function mostrarRecibo(datos) {
    const modal = document.createElement('div');
    modal.className = 'fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4';
    modal.innerHTML = `
        <div class="bg-white rounded-xl shadow-xl max-w-md w-full p-6">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold text-gray-800">Comprobante de Pago</h3>
                <button class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="space-y-4 mb-6">
                <div class="flex justify-between">
                    <span class="text-gray-600">Servicio:</span>
                    <span class="font-medium">${datos.servicio}</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">Monto:</span>
                    <span class="font-medium">S/ ${datos.monto}</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">Código de referencia:</span>
                    <span class="font-medium">${datos.referencia}</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">Fecha y hora:</span>
                    <span class="font-medium">${datos.fecha} - ${datos.hora}</span>
                </div>
            </div>
            
            <div class="p-4 bg-green-50 rounded-lg mb-6">
                <div class="flex items-center text-green-800">
                    <i class="fas fa-check-circle mr-2"></i>
                    <span class="font-medium">Pago realizado con éxito</span>
                </div>
            </div>
            
            <div class="flex justify-between">
                <button class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50">
                    <i class="fas fa-print mr-2"></i> Imprimir
                </button>
                <button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                    <i class="fas fa-download mr-2"></i> Descargar PDF
                </button>
            </div>
        </div>
    `;
    
    modal.querySelector('button').addEventListener('click', () => {
        modal.remove();
    });
    
    document.body.appendChild(modal);
}
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="es-PE">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalle de Noticia - Municipalidad de Ivochote</title>
    <link rel="stylesheet" href="/assets/css/output.css">
</head>
<body class="font-sans antialiased text-gray-800 bg-gray-50">
    <!-- Header Component -->
    <div id="header-container"></div>

    <!-- Main Content -->
    <main class="py-12">
        <div class="container px-6 mx-auto">
            <!-- Breadcrumbs -->
            <nav class="flex mb-6" aria-label="Breadcrumb">
                <ol class="inline-flex items-center space-x-1 md:space-x-3">
                    <li class="inline-flex items-center">
                        <a href="/" class="inline-flex items-center text-sm font-medium text-gray-700 hover:text-blue-600">
                            <i class="fas fa-home mr-2"></i>
                            Inicio
                        </a>
                    </li>
                    <li>
                        <div class="flex items-center">
                            <i class="fas fa-chevron-right text-gray-400"></i>
                            <a href="/noticias/" class="ml-1 text-sm font-medium text-gray-700 hover:text-blue-600 md:ml-2">Noticias</a>
                        </div>
                    </li>
                    <li aria-current="page">
                        <div class="flex items-center">
                            <i class="fas fa-chevron-right text-gray-400"></i>
                            <span class="ml-1 text-sm font-medium text-gray-500 md:ml-2">Detalle de Noticia</span>
                        </div>
                    </li>
                </ol>
            </nav>

            <!-- Noticia Content -->
            <article class="bg-white shadow-lg rounded-lg overflow-hidden">
                <!-- Imagen Destacada -->
                <div class="relative h-96 overflow-hidden">
                    <img id="noticia-imagen" src="" alt="" class="w-full h-full object-cover">
                    <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-6">
                        <div class="max-w-4xl mx-auto">
                            <span id="noticia-categoria" class="inline-block px-3 py-1 mb-2 text-sm font-semibold text-white rounded-full"></span>
                            <h1 id="noticia-titulo" class="text-3xl md:text-4xl font-bold text-white mb-2"></h1>
                            <div class="flex items-center text-white/90">
                                <i class="far fa-calendar-alt mr-2"></i>
                                <time id="noticia-fecha" class="text-sm"></time>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Contenido -->
                <div class="max-w-4xl mx-auto px-6 py-8">
                    <div id="noticia-contenido" class="prose max-w-none">
                        <!-- El contenido se cargará dinámicamente con JavaScript -->
                    </div>

                    <!-- Galería (opcional) -->
                    <div id="noticia-galeria" class="mt-12 hidden">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">Galería de imágenes</h3>
                        <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                            <!-- Las imágenes se cargarán dinámicamente -->
                        </div>
                    </div>

                    <!-- Compartir -->
                    <div class="mt-12 pt-6 border-t border-gray-200">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">Compartir esta noticia</h3>
                        <div class="flex space-x-4">
                            <a href="#" class="social-share bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                                <i class="fab fa-facebook-f mr-2"></i> Facebook
                            </a>
                            <a href="#" class="social-share bg-blue-400 text-white px-4 py-2 rounded-lg hover:bg-blue-500 transition-colors">
                                <i class="fab fa-twitter mr-2"></i> Twitter
                            </a>
                            <a href="#" class="social-share bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors">
                                <i class="fab fa-whatsapp mr-2"></i> WhatsApp
                            </a>
                        </div>
                    </div>
                </div>
            </article>

            <!-- Noticias Relacionadas -->
            <section class="mt-16">
                <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-8">Noticias Relacionadas</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="noticias-relacionadas">
                    <!-- Las noticias relacionadas se cargarán dinámicamente -->
                </div>
            </section>
        </div>
    </main>

    <!-- Footer Component -->
    <div id="footer-container"></div>

    <!-- Scripts -->
    <script src="/assets/js/main.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
    // Obtener el ID de la noticia de la URL
    const urlParams = new URLSearchParams(window.location.search);
    const noticiaId = urlParams.get('id') || '1'; // Default to ID 1 if not specified
    
    // Simular datos de la noticia (en un caso real, harías una petición a una API)
    const noticia = obtenerNoticiaPorId(noticiaId);
    
    // Mostrar los datos en la página
    if (noticia) {
        document.getElementById('noticia-imagen').src = noticia.imagen;
        document.getElementById('noticia-imagen').alt = noticia.titulo;
        
        const categoriaElement = document.getElementById('noticia-categoria');
        categoriaElement.textContent = noticia.categoria;
        // Establecer color según categoría
        categoriaElement.classList.add(
            noticia.categoria === 'Obras' ? 'bg-blue-600' :
            noticia.categoria === 'Social' ? 'bg-green-600' :
            noticia.categoria === 'Servicios' ? 'bg-yellow-600' :
            'bg-purple-600'
        );
        
        document.getElementById('noticia-titulo').textContent = noticia.titulo;
        document.getElementById('noticia-fecha').textContent = noticia.fecha;
        document.getElementById('noticia-contenido').innerHTML = noticia.contenido;
        
        // Mostrar galería si existe
        if (noticia.galeria && noticia.galeria.length > 0) {
            const galeriaElement = document.getElementById('noticia-galeria');
            galeriaElement.classList.remove('hidden');
            
            const galeriaContainer = galeriaElement.querySelector('div');
            noticia.galeria.forEach(imagen => {
                const imgElement = document.createElement('img');
                imgElement.src = imagen;
                imgElement.alt = noticia.titulo;
                imgElement.className = 'w-full h-32 object-cover rounded-lg cursor-pointer hover:opacity-80 transition-opacity';
                imgElement.addEventListener('click', () => abrirImagen(imagen));
                galeriaContainer.appendChild(imgElement);
            });
        }
    }
    
    // Cargar noticias relacionadas
    cargarNoticiasRelacionadas(noticiaId);
    
    // Configurar botones de compartir
    configurarCompartir();
});

function obtenerNoticiaPorId(id) {
    // Datos de ejemplo - en una aplicación real esto vendría de una API
    const noticias = {
        '1': {
            id: '1',
            titulo: 'Inauguración del nuevo centro de salud comunitario',
            categoria: 'Obras',
            fecha: '20 de Julio, 2025',
            imagen: '/assets/img/noticias/news-1.jpg',
            contenido: `
                <p>El pasado viernes 18 de julio se inauguró el nuevo Centro de Salud Comunitario de Ivochote, una obra esperada por más de 500 familias de nuestro centro poblado.</p>
                <p class="mt-4">El alcalde Juan Pérez, junto al director regional de salud, cortaron la cinta inaugural en una ceremonia que contó con la presencia de autoridades locales y población en general.</p>
                <h3 class="mt-6 text-xl font-semibold">Características del nuevo centro</h3>
                <ul class="mt-2 list-disc pl-5">
                    <li>Consultorios médicos totalmente equipados</li>
                    <li>Sala de emergencias las 24 horas</li>
                    <li>Área de pediatría y maternidad</li>
                    <li>Farmacia comunitaria</li>
                </ul>
                <p class="mt-4">Este proyecto tuvo una inversión de S/ 850,000 y fue financiado con fondos del gobierno regional y municipal.</p>
            `,
            galeria: [
                '/assets/img/noticias/galeria-1-1.jpg',
                '/assets/img/noticias/galeria-1-2.jpg',
                '/assets/img/noticias/galeria-1-3.jpg'
            ]
        },
        // Más noticias de ejemplo...
    };
    
    return noticias[id] || noticias['1']; // Default to first if ID not found
}

function cargarNoticiasRelacionadas(noticiaId) {
    // Simular noticias relacionadas (en una app real sería una petición a la API)
    const noticiasRelacionadas = [
        {
            id: '2',
            titulo: 'Programa de apoyo alimentario para familias vulnerables',
            categoria: 'Social',
            fecha: '18 de Julio, 2025',
            imagen: '/assets/img/noticias/news-2.jpg'
        },
        {
            id: '3',
            titulo: 'Mejoras en el sistema de recolección de residuos',
            categoria: 'Servicios',
            fecha: '15 de Julio, 2025',
            imagen: '/assets/img/noticias/news-3.jpg'
        }
    ];
    
    const container = document.getElementById('noticias-relacionadas');
    container.innerHTML = '';
    
    noticiasRelacionadas.forEach(noticia => {
        if (noticia.id !== noticiaId) { // No mostrar la misma noticia como relacionada
            const article = document.createElement('article');
            article.className = 'bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-shadow';
            article.innerHTML = `
                <div class="relative h-48 overflow-hidden">
                    <img src="${noticia.imagen}" alt="${noticia.titulo}" class="w-full h-full object-cover transition-transform duration-500 hover:scale-105">
                    <div class="absolute top-4 left-4 ${
                        noticia.categoria === 'Obras' ? 'bg-blue-600' :
                        noticia.categoria === 'Social' ? 'bg-green-600' :
                        noticia.categoria === 'Servicios' ? 'bg-yellow-600' :
                        'bg-purple-600'
                    } text-white px-3 py-1 rounded-full text-xs font-medium">${noticia.categoria}</div>
                </div>
                <div class="p-6">
                    <time class="text-gray-500 text-sm">${noticia.fecha}</time>
                    <h3 class="text-lg font-semibold text-gray-800 my-2">${noticia.titulo}</h3>
                    <a href="/noticias/detalle-noticia.html?id=${noticia.id}" class="text-blue-600 font-medium inline-flex items-center text-sm">
                        Leer más <i class="fas fa-arrow-right ml-2"></i>
                    </a>
                </div>
            `;
            container.appendChild(article);
        }
    });
}

function configurarCompartir() {
    const titulo = document.getElementById('noticia-titulo').textContent;
    const url = window.location.href;
    
    document.querySelectorAll('.social-share').forEach(boton => {
        boton.addEventListener('click', function(e) {
            e.preventDefault();
            
            if (this.classList.contains('bg-blue-600')) {
                // Facebook
                window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`, '_blank');
            } else if (this.classList.contains('bg-blue-400')) {
                // Twitter
                window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(titulo)}&url=${encodeURIComponent(url)}`, '_blank');
            } else if (this.classList.contains('bg-red-600')) {
                // WhatsApp
                window.open(`https://wa.me/?text=${encodeURIComponent(`${titulo} - ${url}`)}`, '_blank');
            }
        });
    });
}

function abrirImagen(src) {
    const modal = document.createElement('div');
    modal.className = 'fixed inset-0 z-50 flex items-center justify-center bg-black/90 p-4';
    modal.innerHTML = `
        <div class="relative max-w-4xl max-h-full">
            <button class="absolute -top-12 right-0 text-white text-2xl">
                <i class="fas fa-times"></i>
            </button>
            <img src="${src}" class="max-h-[80vh] object-contain">
        </div>
    `;
    
    modal.querySelector('button').addEventListener('click', () => {
        modal.remove();
    });
    
    document.body.appendChild(modal);
}
    </script>
</body>
</html>